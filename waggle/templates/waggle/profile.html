<html>

<head>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Poco Courses</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">


	<!--link rel="stylesheet" href="../../../bootstrap/css/bootstrap-responsive.css"/-->

	<!--link rel="stylesheet" href="../css/tablet.css"/-->

	<!--script src="../../../js/DecimalFormat.js"></script-->


	<!--script src="js/jquery.mobile-1.1.0-rc.1.js"></script-->
	<!--script src="js/jgestures.min.js"></script-->
    <!--<script src="js/jquery.js"></script-->


	<script type="text/javascript">


		var clients = [];


		function submitOnEnter(myfield, e){
			var keycode;
			if(window.event)
				keycode = window.event.keyCode;
			else if(e)
				keycode = e.which;
			else
				return true;

			if (keycode == 13){
		   		myfield.form.submit();
		   		return false;
		   	}else
		   		return true;
		}

		function getParameterByName(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				results = regex.exec(location.search);
			return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}


		function init(){

			//This gets the session token from the url.
			var token = getParameterByName('session');
			console.log("Token: "+ token);

			if( token != null && token.length > 0 )
				sessionStorage.setItem('token', token);
			else
				token = sessionStorage.getItem('token');


            success('{{object.email}}');

	
		}


		function success(username){

			sessionStorage.setItem('username', username);

			$("#username").text(username);


			var clientSelect = document.getElementById("clientSelect");

		}

    function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
                console.log('User signed out.');
                });
    }


	</script>

</head>


<body onload="init();">

	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand" style="font-size:22px;">Poco</span>
        </div>
        <div class="navbar-collapse collapse">
            <form class="navbar-form navbar-right" role="form" action="{% url 'waggle:login' %}">

          	<span id="username" style="color:#fff;"></span>&nbsp;&nbsp;

            <!--div class="form-group">
              <input type="text" placeholder="Email" class="form-control">
            </div>
            <div class="form-group">
              <input type="password" placeholder="Password" class="form-control">
            </div>
            <button type="submit" class="btn btn-success">Sign in</button-->

            <button type="submit" class="btn btn-danger" onclick="signOut()">Sign out</button>

          </form>
        </div><!--/.navbar-collapse -->
      </div>
    </div>



    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
      	<br/>
        <h2>Welcome to Poco</h2>
        <p>This would be a good place to say a little something about Poco.  Below are your courses.  Each course has a set of modules that will help you build your programming and data science skills.  Select a course below to get started</p>
        <!--p><a class="btn btn-primary btn-lg" role="button">Learn more &raquo;</a></p-->
      </div>
    </div>


    <div class="container">

	  <center>
		  <table style="width:80%;">

            <!-- begin for -->
            {% for course in courses %}
			<tr>
				<td>
					<nav class="navbar navbar-default">
						<div class="container-fluid">
							<div class="navbar-header" style="padding:15px; width:100%; line-height:150%">
								<div style="float:right;">
									<br/>
                                  <a class="btn btn-primary" href="{% url 'waggle:menu' pk=object.pk course=course.title|slugify %}" role="button">Explore this Course</a>
								</div>
                                <p> {{course.title}} </p>
                                <p> {{course.description}} </p>
							  	<br/>
							  	<br/>
							</div>
						 </div>
					 </nav>
				</td>
			</tr>
            {% endfor %}
            <!-- end for -->

		  </table>
      </center>

   	</div>




</body>

</html>
